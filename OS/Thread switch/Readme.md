Код [отсюда](https://github.com/cscenter/OS_online_course/tree/master/week3/threads/thread-switch), добавлены комментарии